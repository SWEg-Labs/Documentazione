% Intestazione
\fancyhead[L]{4 \hspace{0.2cm} Guida all’utilizzo} % Testo a sinistra 

\section{Guida all’utilizzo}
\label{sec:guida_utilizzo}
% Screenshot di cosa appare all'avvio del chatbot. Descrivere gli elementi presenti nella schermata iniziale.


\subsection{Cosa chiedere, e come chiederlo}
\label{subsec:cosa_come_chiedere}

BuddyBot è pensato per essere l'assistente digitale di un'azienda informatica che desidera aiutare i propri dipendenti a ricercare in
modo veloce le informazioni di interesse nel codice e nella documentazione dei vari progetti aziendali. Più precisamente, ad
ogni interrogazione posta dall'utente vengono associati
dei documenti di contesto, che provengono esclusivamente dai profili \emph{GitHub}\textsubscript{\textbf{\textit{G}}},
\emph{Jira}\textsubscript{\textbf{\textit{G}}} e \emph{Confluence}\textsubscript{\textbf{\textit{G}}} dell'azienda, e, in base alle
informazioni presenti su tali documenti di contesto, il chatbot fornirà la risposta alla domanda ricevuta.
Se la domanda viene malposta, il chatbot potrebbe non essere in grado di fornire una risposta, e in tal caso potrebbe restituire
uno dei seguenti messaggi:
\begin{itemize}
    \item \emph{"Domanda fuori contesto"}: la domanda posta non è inerente al contesto informatico aziendale;
    \item \emph{"Informazione non trovata"}: non è stato possibile trovare nei documenti di contesto informazioni utili per rispondere
    alla domanda.
\end{itemize}

E' tuttavia possibile che il chatbot restituisca tali risposte anche in casi in cui non ce lo si aspetta.
Per evitare di ottenere risposte negative, forniamo qui di seguito delle istruzioni per capire come porre la domanda per
ottenere una risposta soddisfacente:
\begin{enumerate}
    \item La domanda deve essere concisa e diretta, senza giri di parole. Ad esempio "Qual è lo stato del progetto X su Jira?" invece
    che "Potresti gentilmente dirmi qual è lo stato attuale del progetto X su Jira, per favore?";
    \item Si devono mettere bene in risalto le parole chiave. Ad esempio "Qual è l'errore di build nel progetto Y?" invece che "Qual
    è il problema con il progetto Y?";
    \item La domanda deve essere il più breve possibile. Ad esempio "Chi è l'assegnatario del ticket Z?" invece che "Vorrei sapere
    chi è la persona a cui è stato assegnato il ticket Z";
    \item La domanda deve essere pensata per ottenere una risposta unitaria, e non per aprire una discussione. Ad esempio, occorre
    unificare "Quali commit sono stati fatti oggi? Mostrameli in forma di tabella con assegnatario e data" invece che porre due domande
    separate "Quali commit sono stati fatti oggi?" e "Mostrameli in forma di tabella con assegnatario e data", perchè in quest'ultimo
    caso la seconda domanda riceverà come risposta "Domanda fuori contesto": infatti, ogni coppia domanda-risposta è a sè stante, cioè
    il chatbot non considera il completo flusso del discorso per generare la risposta all'interrogazione corrente, bensì considera solo
    quest'ultima. Le domande suggerite per proseguire sono infatti pensate per guidare l'utente verso una nuova interrogazione, e non per far
    completare la risposta alla domanda corrente;
    \item La domanda deve riguardare un contesto chiaro e definito, quindi non può toccare tematiche troppo generali. Ad esempio
    "Quali sono i task aperti per il progetto A?" invece che "Qual è la situazione dei nostri progetti?";
    \item Il suddetto contesto deve essere uno, infatti non si possono porre due o più domande a tema differente in una stessa
    interrogazione. Ad esempio, invece che "Chi è l'assegnatario del ticket Z su Jira
    e quali sono i suoi relativi commit su GitHub?", è meglio separare in "Chi è l'assegnatario del ticket Z su Jira?" e poi, una 
    volta ricevuta la risposta, "Quali sono i commit di persona Y su GitHub?" (specificando chiaramente la persona, poichè, come suddetto, il chatbot non può visualizzare il messaggio precedente);
    \item Non si devono chiedere informazioni generiche a riguardo di una risorsa fornendo solo il nome della stessa, ma bisogna
    bensì specificare più di preciso cosa si vuole sapere a riguardo di tale risorsa. Ad esempio "Qual è la descrizione del ticket
    Z su Jira?" invece che "Dimmi qualcosa sul ticket Z";
    \item La domanda deve essere posta in un linguaggio quanto più possibile formale e tecnico, cercando di rimanere aderenti
    allo stile di scrittura dei documenti aziendali. Un linguaggio troppo colloquiale quasi sicuramente condurrà a risposte negative.
    Ad esempio "Qual è la copertura dei test per il modulo B?" invece che "Come stanno andando i test per il modulo B?";
    \item Non si devono porre domande che richiedono una risposta soggettiva. In caso ne venga posta una per sbaglio, non ci si deve
    fidare della risposta fornita, è bensì consigliabile chiedere ad un collega. Ad esempio "A quanto ammonta la copertura del codice
    nel progetto C?" invece che "Pensi che il codice del progetto C sia buono?";
    \item Si devono evitare domande che richiedano ragionamento e/o collegamenti logici, in quanto il chatbot non è in grado di
    processare informazioni in tal senso. Ad esempio "Quali sono i commit svolti tra il 6 ed il 10 febbraio nel progetto D?" invece che "Quali sono i
    commit nel progetto D dall'inizio della sprint ad ora?";
    \item Non si devono porre domande per la cui risposta è necessaria una ricerca su internet, in quanto il chatbot fa
    riferimento esclusivamente ai documenti di contesto, e non è abile a ricavare informazioni attendibili in rete. Ad esempio, invece che "Nel
    progetto Y viene utilizzata l'ultima versione rilasciata del framework X?", bisogna chiedere "Qual è la versione del framework X
    che viene utilizzata nel progetto Y?" e poi cercare manualmente su internet se tale versione è l'ultima rilasciata o meno.
\end{enumerate}


\subsection{Interrogazione del chatbot}

\subsubsection{Come inserire una domanda}
\label{subsec:come_inserire_domanda}

Le domande poste al \emph{chatbot} possono essere inserite in due modi: tramite una domanda libera all’inizio della conversazione oppure, dalla seconda interazione in poi, selezionando una delle opzioni suggerite per proseguire il dialogo.

\begin{itemize}
    \item All'inizio della conversazione, puoi inserire una domanda o un messaggio liberamente. Questo consente una maggiore flessibilità e personalizzazione dell'interazione.
    \item Dalla seconda domanda in poi, sopra il campo di input vengono proposte tre domande predefinite per facilitare la continuazione della conversazione.
\end{itemize}

\subsubsection{La risposta del chatbot}
% Parlare:
% - della risposta testuale (che può contenere uno snippet di codice in un apposito riquadro);
% - della possibilità di copiare il testo, e soprattutto di copiare lo snippet di codice, entrambi mediante pulsante apposito;
% - della visualizzazione dei link correlati nell'apposito riquadro.


\subsection{Visualizzazione dello storico dei messaggi}
% Parlare:
% - della schermata iniziale (senza messaggi);
% - della visualizzazione della data e ora di invio del messaggio;
% - dello scorrimento verso l'alto per visualizzare i messaggi precedenti fino all'inizio della conversazione;
% - del pulsante "torna ai messaggi recenti" per tornare agli ultimi messaggi della conversazione.


\subsection{Aggiornamento automatico dei documenti}
\label{subsec:aggiornamento_automatico_documenti}
Al fine di garantire che le informazioni fornite dal chatbot siano il più possibile attendibili, i documenti di contesto utilizzati per generare le risposte vengono aggiornati ogni 24 ore.
Tali aggiornamenti sono svolti in modo automatico, e non è dunque necessario alcun intervento di configurazione.
È possibile che, nel momento in cui si pone una domanda, l'aggiornamento automatico dei documenti sia in corso, e quindi potrebbe avvenire un errore nella generazione della risposta. In tal caso, è consigliabile attendere qualche minuto e riprovare.
In alto a destra è presente un badge di segnalazione che indica l'esito dell'ultimo aggiornamento:
\begin{itemize}
    \item Se il badge presenta una spunta verde con accanto la scritta \emph{Aggiornato}, come visibile in figura \bulref{fig:Aggiornamento avvenuto con successo}, significa che l'ultimo aggiornamento è avvenuto con successo, e le risposte fornite
    dal chatbot sono aggiornate ai documenti non più vecchi di 24 ore;
    \item Se il badge presenta una X rossa con accanto la scritta \emph{Non aggiornato}, come visibile in figura \bulref{fig:Aggiornamento fallito}, significa che l'ultimo aggiornamento è fallito, e le risposte fornite dal chatbot potrebbero
    non essere aggiornate ai documenti più recenti;
    \item Se il badge presenta un segnale di pericolo con accanto la scritta \emph{Errore}, come visibile in figura \bulref{fig:Errore nel recupero dell'esito dell'ultimo aggiornamento}, significa che non è stato possibile recuperare l'esito dell'ultimo aggiornamento, e
    dunque, non è possibile sapere se le risposte fornite dal chatbot sono aggiornate ai documenti più recenti o meno.
\end{itemize}

\newpage

\begin{figure}[h]
    \centering
        \includegraphics[width=.8\linewidth]{Badge - Aggiornamento avvenuto con successo.png}
        \caption{Badge di aggiornamento avvenuto con successo}
        \label{fig:Aggiornamento avvenuto con successo}        
\end{figure}

\begin{figure}[h]
    \centering
        \includegraphics[width=.8\linewidth]{Badge - Aggiornamento fallito.png}
        \caption{Badge di aggiornamento fallito}
        \label{fig:Aggiornamento fallito}
\end{figure}

\begin{figure}[h]
    \centering
        \includegraphics[width=.8\linewidth]{Badge - Errore recupero esito aggiornamento.png}
        \caption{Badge di errore nel recupero dell'esito dell'ultimo aggiornamento}
        \label{fig:Errore nel recupero dell'esito dell'ultimo aggiornamento}
\end{figure}



\newpage

\subsection{Possibili errori}
\label{subsec:possibili_errori}

Durante l'utilizzo del chatbot è possibile che si verifichino alcuni errori. Lo scopo di questa sezione è presentare alcune casistiche non desiderate e fornire una guida per ripristinare il corretto funzionamento.


\subsubsection{Errore nel recupero dello storico dei messaggi}

\begin{figure}[h]
    \centering
        \includegraphics[width=.8\linewidth]{Errore - Recupero storico messaggi dal database.png}
        \caption{Errore nel recupero dello storico dei messaggi}
        \label{fig:Errore nel recupero dello storico dei messaggi}
\end{figure}

Nel caso non sia possibile recuperare i messaggi delle precedenti conversazioni, verrà mostrato in alto un apposito riquadro che comunica il problema, come visibile in figura \bulref{fig:Errore nel recupero dello storico dei messaggi}. E' probabile che ciò sia dovuto ad un problema con il \emph{database relazionale}\textsubscript{\textbf{\textit{G}}} \emph{Postgres}\textsubscript{\textbf{\textit{G}}}, il consiglio dunque è di recarsi su \emph{Docker}\textsubscript{\textbf{\textit{G}}} e di controllare se il \emph{container}\textsubscript{\textbf{\textit{G}}} dedicato a Postgres è acceso, ed eventualmente riavviarlo. Nel caso ciò non sia sufficiente, controllare allora lo stato del container di backend, poichè anch'esso ha un ruolo fondamentale nella funzionalità di recupero dei vecchi messaggi, e provare dunque a riavviare anch'esso.


\subsubsection{Errore nella generazione della risposta}

\begin{figure}[h]
    \centering
        \includegraphics[width=.8\linewidth]{Errore - Generazione della risposta.png}
        \caption{Errore nella generazione della risposta}
        \label{fig:Errore nella generazione della risposta}
\end{figure}

Nel caso avvenga un errore nella generazione della risposta, verrà ricevuto un messaggio di errore e, in alto, apparirà per pochi secondi un avviso che invita a riprovare più tardi, come visibile in figura \bulref{fig:Errore nella generazione della risposta}. Ciò può essere dovuto principalmente a tre motivi:
\begin{itemize}
    \item Scarsa connessione a internet, tale per cui non è stato possibile contattare l'\emph{LLM}\textsubscript{\textbf{\textit{G}}}: in tal caso, il consiglio è di provare a riconnettersi e poi riprovare;
    \item Problemi con il container di backend: in tal caso, il consiglio è provare a spegnere e riaccendere l'apposito container in Docker;
    \item Contemporaneità tra l'aggiornamento automatico dei documenti e la richiesta di una nuova domanda: in tal caso, il consiglio è di attendere qualche minuto e poi riprovare.
\end{itemize}



\subsubsection{Errore nel recupero del link dei file correlati alla risposta}

\begin{figure}[h]
    \centering
        \includegraphics[width=.8\linewidth]{Errore - Non sono stati trovati link correlati.png}
        \caption{Errore nel recupero del link dei file correlati alla risposta}
        \label{fig:Errore nel recupero del link dei file correlati alla risposta}
\end{figure}

Nel caso avvenga un errore nel recupero dei link correlati alla risposta appena generata, verrà mostrato il consueto riquadro alla fine del messaggio, ma contenente, invece che i link, una frase descrittiva del problema, come visibile in figura \bulref{fig:Errore nel recupero del link dei file correlati alla risposta}. Siccome la risposta è stata generata normalmente, il motivo per la mancata visualizzazione dei link è da ricercare nella correttezza della domanda, che verosimilmente non rispetta le istruzioni fornite nella sezione \bulref{subsec:cosa_come_chiedere} di questo documento. Ad esempio, in figura è stata posta una domanda che chiede quali sono le fasi del ciclo di vita di un ticket su \emph{Jira}\textsubscript{\textbf{\textit{G}}}, la quale viola il punto 11 della suddetta sezione: come si può notare, la risposta viene comunque generata, ma non è attendibile, poichè infatti non è stata citata nessuna fonte a suo sostegno. Fortunatamente, rispettando assiduamente la guida su cosa chiedere e come chiederlo, l'errore nel recupero dei link correlati alla risposta non dovrebbe mai avvenire.


\subsubsection{Visualizzazione errore nel recupero della data e ora di invio del messaggio}

\begin{figure}[h]
    \centering
        \includegraphics[width=.8\linewidth]{Errore - Recupero data e ora di invio del messaggio.png}
        \caption{Errore nel recupero della data e ora di invio del messaggio}
        \label{fig:Errore nel recupero della data e ora di invio del messaggio}
\end{figure}

Nel caso non sia possibile recuperare la data e l'ora di invio del messaggio, verrà mostrata al loro posto una scritta segnalante l'errore, come visibile in figura \bulref{fig:Errore nel recupero della data e ora di invio del messaggio}. E' probabile che ciò sia dovuto ad un problema con il \emph{database relazionale}\textsubscript{\textbf{\textit{G}}} \emph{Postgres}\textsubscript{\textbf{\textit{G}}}, il consiglio dunque è di recarsi su \emph{Docker}\textsubscript{\textbf{\textit{G}}} e di controllare se il \emph{container}\textsubscript{\textbf{\textit{G}}} dedicato a Postgres è acceso, ed eventualmente riavviarlo. Nel caso ciò non sia sufficiente, controllare allora lo stato del container di backend, poichè anch'esso ha un ruolo fondamentale nella funzionalità di recupero della data e ora di invio del messaggio, e provare dunque a riavviare anch'esso.


\subsubsection{Errore nella generazione delle domande per proseguire la conversazione}

\begin{figure}[h]
    \centering
        \includegraphics[width=.8\linewidth]{Errore - Generazione di domande per proseguire la conversazione.png}
        \caption{Errore nella generazione delle domande per proseguire la conversazione}
        \label{fig:Errore nella generazione delle domande per proseguire la conversazione}
\end{figure}

Nel caso avvenga un errore nella generazione delle domande suggerite per proseguire la conversazione, verrà mostrata una scritta rossa comunicante il problema sopra alla barra di input, come visibile in figura \bulref{fig:Errore nella generazione delle domande per proseguire la conversazione}. Ciò può essere dovuto principalmente a due motivi:
\begin{itemize}
    \item Scarsa connessione a internet, tale per cui non è stato possibile contattare l'\emph{LLM}\textsubscript{\textbf{\textit{G}}}: in tal caso, il consiglio è di provare a riconnettersi e poi riprovare;
    \item Problemi con il container di backend: in tal caso, il consiglio è provare a spegnere e riaccendere l'apposito container in Docker.
\end{itemize}


\subsubsection{Visualizzazione di un badge che segnala un errore nell'ultimo aggiornamento del database vettoriale}

\begin{figure}[h]
    \centering
        \includegraphics[width=.8\linewidth]{Badge - Aggiornamento fallito.png}
        \caption{Badge di aggiornamento fallito}
        \label{fig:Badge di aggiornamento fallito}
\end{figure}

Come descritto nella sezione \bulref{subsec:aggiornamento_automatico_documenti}, nel caso l'ultimo aggiornamento del database vettoriale sia fallito, verrà mostrato in alto a destra un badge di segnalazione che indica il fallimento, come visibile in figura \bulref{fig:Aggiornamento fallito}. E' probabile che ciò sia dovuto ad un problema con il \emph{database vettoriale} \emph{Chroma}, il consiglio dunque è di recarsi su \emph{Docker}\textsubscript{\textbf{\textit{G}}} e di controllare se il \emph{container}\textsubscript{\textbf{\textit{G}}} dedicato a Chroma è acceso, ed eventualmente riavviarlo. Nel caso ciò non sia sufficiente, controllare allora lo stato del container di backend, poichè anch'esso ha un ruolo fondamentale nella funzionalità di aggiornamento automatico dei documenti, e provare dunque a riavviare anch'esso.


\subsubsection{Visualizzazione errore nel recupero dell'esito dell'ultimo aggiornamento del database vettoriale}

\begin{figure}[h]
    \centering
        \includegraphics[width=.8\linewidth]{Badge - Errore recupero esito aggiornamento.png}
        \caption{Badge di errore nel recupero dell'esito dell'ultimo aggiornamento}
        \label{fig:Badge di errore nel recupero dell'esito dell'ultimo aggiornamento}
\end{figure}

Come descritto nella sezione \bulref{subsec:aggiornamento_automatico_documenti}, nel caso non sia possibile recuperare l'esito dell'ultimo aggiornamento del database vettoriale, verrà mostrato in alto a destra un badge di segnalazione che indica l'errore, come visibile in figura \bulref{fig:Badge di errore nel recupero dell'esito dell'ultimo aggiornamento}. E' probabile che ciò sia dovuto ad un problema con il \emph{database relazionale} \emph{Postgres}, il consiglio dunque è di recarsi su \emph{Docker}\textsubscript{\textbf{\textit{G}}} e di controllare se il \emph{container}\textsubscript{\textbf{\textit{G}}} dedicato a Postgres è acceso, ed eventualmente riavviarlo. Nel caso ciò non sia sufficiente, controllare allora lo stato del container di backend, poichè anch'esso ha un ruolo fondamentale nella funzionalità di recupero dell'esito dell'ultimo aggiornamento del database vettoriale, e provare dunque a riavviare anch'esso.


\subsubsection{Visualizzazione errore nel recupero dei messaggi precedenti allo scroll}

\begin{figure}[h]
    \centering
        \includegraphics[width=.8\linewidth]{Errore - Recupero messaggi precedenti dal database.png}
        \caption{Errore nel recupero dei messaggi precedenti allo scroll}
        \label{fig:Errore nel recupero dei messaggi precedenti allo scroll}
\end{figure}

Nel caso non sia possibile recuperare i messaggi delle precedenti conversazioni allo scroll dello schermo, verrà mostrato in corrispondenza del confine superiore della chat, per pochi secondi, un avviso che invita a riprovare più tardi, come visibile in figura \bulref{fig:Errore nel recupero dei messaggi precedenti allo scroll}. E' probabile che ciò sia dovuto ad un problema con il \emph{database relazionale}\textsubscript{\textbf{\textit{G}}} \emph{Postgres}\textsubscript{\textbf{\textit{G}}}, il consiglio dunque è di recarsi su \emph{Docker}\textsubscript{\textbf{\textit{G}}} e di controllare se il \emph{container}\textsubscript{\textbf{\textit{G}}} dedicato a Postgres è acceso, ed eventualmente riavviarlo. Nel caso ciò non sia sufficiente, controllare allora lo stato del container di backend, poichè anch'esso ha un ruolo fondamentale nella funzionalità di recupero dei vecchi messaggi, e provare dunque a riavviare anch'esso.


% Fare un elenco di possibili errori che possono verificarsi durante l'utilizzo del chatbot. Ovviamente per ciascuno va
% riportato uno screenshot.
% - Errore nel recupero dello storico (UC9) ✅
% - Errore nella generazione della risposta (UC3). ✅
% ----> Segnalare che potrebbe avvenire un errore nella generazione della risposta anche nel caso in cui sia stata posta una domanda
% ----> in contemporanea con l'aggiornamento automatico dei documenti. ✅
% - Errore nel recupero del link dei file correlati alla risposta (UC14) ✅
% - Visualizzazione errore nel recupero della data e ora di invio del messaggio (UC28) ✅
% - Errore nella generazione delle domande per proseguire la conversazione (UC13) ✅
% - Visualizzazione di un badge che segnala un errore nell'ultimo aggiornamento del database vettoriale (UC20) ✅
% - Visualizzazione di un badge che segnala un errore nel recupero dell'esito dell'ultimo aggiornamento del database vettoriale (UC20) ✅
% - Visualizzazione di un messaggio che spiega il badge che segnala un errore nel recupero dell'esito dell'ultimo aggiornamento del database vettoriale (UC24) ❌ Praticamente coincide con la visualizzazione del badge, ho demandato alla sezione sopra per la descrizione dell'emoji e del messaggio.
% - Visualizzazione errore nel recupero dei messaggi precedenti allo scroll (UC26) ✅
